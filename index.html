<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario dell'Avvento delle Costellazioni</title>
    <!-- Utilizzo di Tailwind CSS per uno stile pulito e moderno -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117;
            color: #c9d1d9;
            overflow-x: hidden;
        }
        .container {
            max-width: 800px;
        }
        .card {
            background-color: #161b22;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            border: 1px solid #30363d;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
        }
        .card.unlocked {
            filter: none;
            cursor: pointer;
        }
        .card.locked {
            filter: grayscale(100%) brightness(50%);
            cursor: not-allowed;
        }
        .answer-input {
            background-color: #0d1117;
            border: 1px solid #30363d;
            color: #c9d1d9;
        }
        .button {
            transition: background-color 0.3s ease, transform 0.1s ease;
        }
        .button:hover {
            transform: translateY(-1px);
        }
        .correct-answer {
            animation: fadeIn 1s ease-in-out;
        }
        .incorrect-answer {
            animation: shake 0.5s;
        }
        .text-shadow {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        .star {
            position: absolute;
            background-color: #fff;
            border-radius: 50%;
            opacity: 0;
            animation: twinkle 5s infinite;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1); }
        }

        /* Genera stelle in background */
        .star-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-10 px-4">
    <div class="star-container"></div>

    <!-- Modale per le domande -->
    <div id="modal" class="fixed inset-0 z-50 bg-black bg-opacity-80 hidden flex justify-center items-center p-4">
        <div class="bg-[#161b22] rounded-lg p-6 w-full max-w-2xl border border-[#30363d] shadow-lg">
            <div class="flex justify-end">
                <button onclick="closeModal()" class="text-gray-400 hover:text-white text-3xl">&times;</button>
            </div>
            <h2 id="modal-title" class="text-2xl font-bold mb-4 text-center text-[#58a6ff]"></h2>
            <p id="modal-date" class="text-sm text-gray-400 mb-4 text-center"></p>
            <div class="flex flex-col md:flex-row items-center md:items-start mb-6">
                <img id="modal-image" src="" alt="Immagine costellazione" class="w-full md:w-1/2 rounded-lg mb-4 md:mb-0 md:mr-6 border border-[#30363d]">
                <div class="w-full md:w-1/2">
                    <p id="modal-question" class="text-xl mb-4 font-semibold"></p>
                    <div id="modal-hint-area" class="mb-4">
                        <p id="modal-hint-text" class="text-gray-400 italic hidden"></p>
                    </div>
                    <input type="text" id="answer-input" placeholder="La tua risposta..." class="answer-input w-full p-2 rounded mb-4 focus:outline-none focus:ring-2 focus:ring-[#58a6ff]">
                    <p id="modal-score" class="text-lg font-bold mb-4">Punti attuali: 3</p>
                    <div class="flex flex-col md:flex-row md:space-x-4 space-y-2 md:space-y-0">
                        <button id="submit-answer-btn" onclick="checkAnswer()" class="button w-full md:w-1/2 bg-[#238636] text-white p-2 rounded font-semibold hover:bg-[#2ea043]">Invia risposta</button>
                        <button id="get-hint-btn" onclick="getHint()" class="button w-full md:w-1/2 bg-gray-500 text-white p-2 rounded font-semibold hover:bg-gray-600">Ottieni un indizio</button>
                    </div>
                </div>
            </div>
            <div id="modal-result" class="mt-4 text-center hidden">
                <p id="result-message" class="text-xl font-bold"></p>
                <div id="additional-info" class="mt-4 p-4 bg-[#0d1117] rounded-lg border border-[#30363d] hidden">
                    <h3 class="text-xl font-bold mb-2">Curiosità sulla costellazione</h3>
                    <p id="info-text"></p>
                </div>
                <button onclick="closeModal()" class="button bg-[#58a6ff] text-white p-2 rounded mt-4 font-semibold hover:bg-[#79b8ff]">Chiudi</button>
            </div>
        </div>
    </div>

    <!-- Intestazione -->
    <header class="text-center mb-10">
        <h1 class="text-5xl md:text-6xl font-extrabold text-[#58a6ff] mb-2 text-shadow">Calendario dell'Avvento Stellare</h1>
        <p class="text-xl md:text-2xl text-gray-400">Scopri una costellazione al giorno</p>
    </header>

    <!-- Griglia del calendario -->
    <div id="calendar-grid" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-4 p-4">
        <!-- Le card verranno generate qui dal JavaScript -->
    </div>

    <!-- Script JavaScript -->
    <script>
        // Funzione per generare le stelle in background
        function createStars() {
            const starContainer = document.querySelector('.star-container');
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const size = Math.random() * 3;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.left = `${Math.random() * 100}%`;
                star.style.animationDelay = `${Math.random() * 5}s`;
                starContainer.appendChild(star);
            }
        }
        createStars();

        // Dati del calendario: 25 giorni di domande
        const calendarData = [
            {
                day: 1,
                constellation: 'Orione',
                image: 'https://placehold.co/600x400/000/fff?text=Orione',
                question: 'Qual è la costellazione più famosa e facilmente riconoscibile nel cielo invernale, caratterizzata da tre stelle luminose che formano la sua "cintura"?',
                answer: 'Orione',
                hints: [
                    'Prende il nome da un cacciatore della mitologia greca.',
                    'Contiene la supergigante rossa Betelgeuse e la supergigante blu Rigel.',
                    'È visibile da tutto il mondo e si trova vicino al Toro e ai Gemelli.'
                ],
                info: 'Orione è una delle costellazioni più celebri. Le sue tre stelle principali, Alnitak, Alnilam e Mintaka, formano la "Cintura di Orione". Contiene anche la Nebulosa di Orione, un sito di formazione stellare molto studiato.',
            },
            {
                day: 2,
                constellation: 'Orsa Maggiore',
                image: 'https://placehold.co/600x400/000/fff?text=Orsa+Maggiore',
                question: 'Quale costellazione a forma di mestolo è nota anche come "Grande Carro" e fa parte di un gruppo più grande di stelle?',
                answer: 'Orsa Maggiore',
                hints: [
                    'Contiene la stella polare, che si trova nella "coda" dell\'Orsa Minore.',
                    'È una delle costellazioni più antiche e nominate.',
                    'È visibile nell\'emisfero settentrionale tutto l\'anno.'
                ],
                info: 'L\'Orsa Maggiore è una delle costellazioni più grandi e riconoscibili del cielo notturno. Le sette stelle che compongono il "Grande Carro" sono solo una parte della costellazione più estesa.',
            },
            {
                day: 3,
                constellation: 'Cassiopea',
                image: 'https://placehold.co/600x400/000/fff?text=Cassiopea',
                question: 'Quale costellazione a forma di "W" o "M" è visibile nell\'emisfero settentrionale e rappresenta la regina della mitologia greca?',
                answer: 'Cassiopea',
                hints: [
                    'Si trova nel cielo settentrionale, vicino alla stella polare.',
                    'Le sue stelle più luminose formano una figura a zig-zag.',
                    'È la moglie del re Cefeo e la madre di Andromeda.'
                ],
                info: 'Cassiopea è facilmente riconoscibile grazie alla sua forma distintiva. Si trova nella Via Lattea settentrionale e contiene molti ammassi aperti e nebulose.',
            },
            {
                day: 4,
                constellation: 'Cigno',
                image: 'https://placehold.co/600x400/000/fff?text=Cigno',
                question: 'Quale costellazione a forma di croce è conosciuta anche come la "Croce del Nord" e rappresenta un uccello in volo?',
                answer: 'Cigno',
                hints: [
                    'La sua stella più luminosa è Deneb.',
                    'Fa parte del Triangolo Estivo, un famoso asterismo.',
                    'È una costellazione molto grande e si trova nella Via Lattea.'
                ],
                info: 'Il Cigno è una delle costellazioni più importanti del cielo estivo e autunnale. La sua stella più luminosa, Deneb, è una delle stelle più brillanti visibili dalla Terra.',
            },
            {
                day: 5,
                constellation: 'Leone',
                image: 'https://placehold.co/600x400/000/fff?text=Leone',
                question: 'Quale costellazione dello zodiaco è riconoscibile per la sua forma che assomiglia a un leone accovacciato?',
                answer: 'Leone',
                hints: [
                    'La sua stella più luminosa è Regolo.',
                    'Si trova nell\'emisfero settentrionale.',
                    'Contiene la famosa stella a forma di "punto interrogativo" capovolto.'
                ],
                info: 'Il Leone è una delle costellazioni più antiche dello zodiaco. Contiene molte stelle brillanti e si trova vicino alla costellazione della Vergine.',
            },
            {
                day: 6,
                constellation: 'Toro',
                image: 'https://placehold.co/600x400/000/fff?text=Toro',
                question: 'Quale costellazione dello zodiaco è nota per contenere il famoso ammasso di stelle "Le Pleiadi" e la supergigante rossa Aldebaran?',
                answer: 'Toro',
                hints: [
                    'Rappresenta un toro selvaggio della mitologia greca.',
                    'È una delle costellazioni più antiche e si trova vicino a Orione.',
                    'Le sue due stelle più luminose, Aldebaran e l\'Ammasso del Toro, formano la figura a forma di "V" capovolta.'
                ],
                info: 'Il Toro è una delle costellazioni più importanti dello zodiaco. Oltre alle Pleiadi, contiene l\'ammasso stellare Hyades, che forma il volto del Toro.',
            },
            {
                day: 7,
                constellation: 'Pesci',
                image: 'https://placehold.co/600x400/000/fff?text=Pesci',
                question: 'Quale costellazione dello zodiaco è composta da due pesci legati insieme da una corda?',
                answer: 'Pesci',
                hints: [
                    'È la dodicesima e ultima costellazione dello zodiaco.',
                    'Si trova vicino alla costellazione dell\'Acquario.',
                    'Non contiene stelle molto brillanti.'
                ],
                info: 'I Pesci sono una costellazione zodiacale che si trova nel cielo settentrionale. È una delle costellazioni più grandi, ma le sue stelle sono relativamente deboli.',
            },
            {
                day: 8,
                constellation: 'Gemelli',
                image: 'https://placehold.co/600x400/000/fff?text=Gemelli',
                question: 'Quale costellazione dello zodiaco è nota per le sue due stelle principali, Castore e Polluce, che rappresentano due fratelli gemelli?',
                answer: 'Gemelli',
                hints: [
                    'È una costellazione invernale.',
                    'Si trova vicino a Orione e al Toro.',
                    'È una delle dodici costellazioni dello zodiaco.'
                ],
                info: 'I Gemelli sono una costellazione zodiacale che si trova nel cielo settentrionale. Le sue due stelle più luminose, Castore e Polluce, sono associate a due fratelli gemelli nella mitologia greca.',
            },
            {
                day: 9,
                constellation: 'Scorpione',
                image: 'https://placehold.co/600x400/000/fff?text=Scorpione',
                question: 'Quale costellazione dello zodiaco ha una forma che ricorda un gancio o un uncino e contiene la stella supergigante rossa Antares?',
                answer: 'Scorpione',
                hints: [
                    'Si trova nella Via Lattea meridionale.',
                    'È una delle costellazioni più antiche.',
                    'La sua stella principale, Antares, è spesso confusa con il pianeta Marte.'
                ],
                info: 'Lo Scorpione è una costellazione zodiacale che si trova nel cielo meridionale. La sua stella più luminosa, Antares, è una supergigante rossa molto grande e brillante.',
            },
            {
                day: 10,
                constellation: 'Sagittario',
                image: 'https://placehold.co/600x400/000/fff?text=Sagittario',
                question: 'Quale costellazione dello zodiaco è nota per la sua forma a "teiera" e si trova nella stessa direzione del centro della Via Lattea?',
                answer: 'Sagittario',
                hints: [
                    'Rappresenta una creatura mitologica metà uomo e metà cavallo.',
                    'Si trova nel cielo meridionale, vicino allo Scorpione.',
                    'È una costellazione estiva.'
                ],
                info: 'Il Sagittario è una costellazione zodiacale che si trova nella Via Lattea meridionale. Il centro della nostra galassia, la Via Lattea, si trova nella direzione di questa costellazione.',
            },
            {
                day: 11,
                constellation: 'Andromeda',
                image: 'https://placehold.co/600x400/000/fff?text=Andromeda',
                question: 'Quale costellazione è nota per contenere una famosa galassia a spirale, la "Galassia di Andromeda", che è la più vicina alla nostra Via Lattea?',
                answer: 'Andromeda',
                hints: [
                    'Prende il nome da una principessa della mitologia greca.',
                    'Si trova vicino alla costellazione di Pegaso.',
                    'È una costellazione autunnale.'
                ],
                info: 'Andromeda è una costellazione autunnale. La sua stella più luminosa, Alpheratz, fa parte del Triangolo d\'Autunno. Contiene anche la famosa Galassia di Andromeda, l\'oggetto più lontano visibile a occhio nudo dalla Terra.',
            },
            {
                day: 12,
                constellation: 'Lira',
                image: 'https://placehold.co/600x400/000/fff?text=Lira',
                question: 'Quale costellazione, che rappresenta uno strumento musicale, contiene la stella Vega, una delle più luminose del cielo estivo?',
                answer: 'Lira',
                hints: [
                    'È una piccola costellazione estiva.',
                    'Vega, la sua stella più luminosa, fa parte del Triangolo Estivo.',
                    'Rappresenta la lira di Orfeo, un musico mitologico.'
                ],
                info: 'La Lira è una piccola costellazione estiva. La sua stella più luminosa, Vega, è la quinta stella più luminosa del cielo notturno ed è una delle tre stelle che compongono il Triangolo Estivo.',
            },
            {
                day: 13,
                constellation: 'Acquario',
                image: 'https://placehold.co/600x400/000/fff?text=Acquario',
                question: 'Quale costellazione zodiacale, che rappresenta un portatore d\'acqua, si trova tra i Pesci e il Capricorno?',
                answer: 'Acquario',
                hints: [
                    'È una costellazione molto grande ma le sue stelle sono deboli.',
                    'Il suo nome deriva dal latino "aquarius".',
                    'Si trova vicino alla costellazione della Balena.'
                ],
                info: 'L\'Acquario è una delle costellazioni zodiacali. È una costellazione molto grande, ma le sue stelle sono relativamente deboli, rendendola difficile da individuare.',
            },
            {
                day: 14,
                constellation: 'Bilancia',
                image: 'https://placehold.co/600x400/000/fff?text=Bilancia',
                question: 'Quale costellazione dello zodiaco, che rappresenta le bilance della giustizia, si trova tra la Vergine e lo Scorpione?',
                answer: 'Bilancia',
                hints: [
                    'Non ha stelle molto luminose.',
                    'È la settima costellazione dello zodiaco.',
                    'Si trova nel cielo meridionale.'
                ],
                info: 'La Bilancia è una costellazione zodiacale. È una costellazione di dimensioni medie, ma le sue stelle sono deboli e non molto luminose.',
            },
            {
                day: 15,
                constellation: 'Capricorno',
                image: 'https://placehold.co/600x400/000/fff?text=Capricorno',
                question: 'Quale costellazione dello zodiaco, che rappresenta una creatura mitologica metà capra e metà pesce, si trova tra il Sagittario e l\'Acquario?',
                answer: 'Capricorno',
                hints: [
                    'Il suo nome significa "capra con le corna".',
                    'È una delle costellazioni più antiche dello zodiaco.',
                    'Si trova nel cielo meridionale.'
                ],
                info: 'Il Capricorno è una costellazione zodiacale che si trova nel cielo meridionale. È una costellazione di dimensioni medie ma le sue stelle sono deboli.',
            },
            {
                day: 16,
                constellation: 'Corona Boreale',
                image: 'https://placehold.co/600x400/000/fff?text=Corona+Boreale',
                question: 'Quale costellazione a forma di semicerchio, che rappresenta una corona, si trova vicino alla costellazione di Ercole?',
                answer: 'Corona Boreale',
                hints: [
                    'È una piccola costellazione dell\'emisfero settentrionale.',
                    'La sua stella più luminosa è Alphecca.',
                    'Rappresenta la corona della principessa Arianna nella mitologia greca.'
                ],
                info: 'La Corona Boreale è una piccola costellazione dell\'emisfero settentrionale. Le sue stelle formano un semicerchio riconoscibile.',
            },
            {
                day: 17,
                constellation: 'Idra',
                image: 'https://placehold.co/600x400/000/fff?text=Idra',
                question: 'Quale costellazione è la più grande del cielo notturno e rappresenta un serpente d\'acqua?',
                answer: 'Idra',
                hints: [
                    'È una costellazione molto lunga e sottile.',
                    'Si estende per quasi un quarto del cielo.',
                    'Prende il nome da un mostro mitologico con più teste.'
                ],
                info: 'L\'Idra è la costellazione più grande in termini di area. Si estende per oltre 95 gradi nel cielo e rappresenta l\'Idra di Lerna, un mostro mitologico con più teste.',
            },
            {
                day: 18,
                constellation: 'Vergine',
                image: 'https://placehold.co/600x400/000/fff?text=Vergine',
                question: 'Quale costellazione dello zodiaco, la più grande dello zodiaco, rappresenta una fanciulla o una dea?',
                answer: 'Vergine',
                hints: [
                    'La sua stella più luminosa è Spica.',
                    'Si trova tra la Bilancia e il Leone.',
                    'È una costellazione estiva.'
                ],
                info: 'La Vergine è la seconda costellazione più grande del cielo notturno. È una costellazione zodiacale che contiene la stella luminosa Spica, una delle stelle più brillanti del cielo notturno.',
            },
            {
                day: 19,
                constellation: 'Cane Maggiore',
                image: 'https://placehold.co/600x400/000/fff?text=Cane+Maggiore',
                question: 'Quale costellazione contiene la stella più luminosa del cielo notturno, Sirio?',
                answer: 'Cane Maggiore',
                hints: [
                    'Rappresenta un cane che segue il cacciatore Orione.',
                    'È una costellazione invernale.',
                    'Sirio è una stella molto brillante e vicina alla Terra.'
                ],
                info: 'Il Cane Maggiore è una costellazione invernale. La sua stella più luminosa, Sirio, è la stella più brillante del cielo notturno. È nota anche come la "Stella del Cane".',
            },
            {
                day: 20,
                constellation: 'Piccolo Carro',
                image: 'https://placehold.co/600x400/000/fff?text=Piccolo+Carro',
                question: 'Quale costellazione, che rappresenta un piccolo orso, contiene la stella polare, Polaris?',
                answer: 'Piccolo Carro',
                hints: [
                    'È una costellazione polare.',
                    'Si trova nel cielo settentrionale, vicino all\'Orsa Maggiore.',
                    'È spesso usata per l\'orientamento notturno.'
                ],
                info: 'Il Piccolo Carro è una costellazione che si trova nel cielo settentrionale. La sua stella più luminosa, Polaris, è molto vicina al polo nord celeste, rendendola utile per l\'orientamento.',
            },
            {
                day: 21,
                constellation: 'Acquario',
                image: 'https://placehold.co/600x400/000/fff?text=Acquario',
                question: 'Quale costellazione zodiacale, che rappresenta un portatore d\'acqua, si trova tra i Pesci e il Capricorno?',
                answer: 'Acquario',
                hints: [
                    'È una costellazione molto grande ma le sue stelle sono deboli.',
                    'Il suo nome deriva dal latino "aquarius".',
                    'Si trova vicino alla costellazione della Balena.'
                ],
                info: 'L\'Acquario è una delle costellazioni zodiacali. È una costellazione molto grande, ma le sue stelle sono relativamente deboli, rendendola difficile da individuare.',
            },
            {
                day: 22,
                constellation: 'Lince',
                image: 'https://placehold.co/600x400/000/fff?text=Lince',
                question: 'Quale costellazione, nota per la sua scarsità di stelle brillanti, è stata chiamata così perché è necessaria la vista di una lince per vederla?',
                answer: 'Lince',
                hints: [
                    'È una costellazione dell\'emisfero settentrionale.',
                    'Si trova tra l\'Orsa Maggiore e l\'Auriga.',
                    'Non ha stelle particolarmente luminose.'
                ],
                info: 'La Lince è una costellazione dell\'emisfero settentrionale, nota per la sua scarsità di stelle luminose. Il suo nome è stato scelto per indicare che è difficile da individuare.',
            },
            {
                day: 23,
                constellation: 'Ercole',
                image: 'https://placehold.co/600x400/000/fff?text=Ercole',
                question: 'Quale costellazione, che rappresenta un eroe mitologico, contiene il famoso ammasso globulare M13?',
                answer: 'Ercole',
                hints: [
                    'È una delle costellazioni più grandi del cielo.',
                    'Si trova vicino alla Corona Boreale e alla Lira.',
                    'È una costellazione estiva.'
                ],
                info: 'Ercole è una grande costellazione dell\'emisfero settentrionale. È la quinta costellazione più grande del cielo e contiene il famoso ammasso globulare M13.',
            },
            {
                day: 24,
                constellation: 'Balena',
                image: 'https://placehold.co/600x400/000/fff?text=Balena',
                question: 'Quale costellazione, che rappresenta un mostro marino, si trova vicino all\'Acquario e ai Pesci?',
                answer: 'Balena',
                hints: [
                    'Il suo nome deriva dal greco "Ketos".',
                    'È una costellazione autunnale.',
                    'Non ha stelle molto brillanti.'
                ],
                info: 'La Balena è una costellazione autunnale. Non ha stelle molto luminose, ma è stata una costellazione importante per gli antichi greci.',
            },
            {
                day: 25,
                constellation: 'Sestante',
                image: 'https://placehold.co/600x400/000/fff?text=Sestante',
                question: 'Quale costellazione, che rappresenta uno strumento di navigazione, si trova sotto la costellazione del Leone?',
                answer: 'Sestante',
                hints: [
                    'È una costellazione molto debole.',
                    'Si trova vicino all\'Idra e al Leone.',
                    'Non ha stelle molto luminose.'
                ],
                info: 'Il Sestante è una costellazione molto debole e difficile da individuare. Il suo nome deriva da uno strumento di navigazione che veniva utilizzato per misurare l\'altezza delle stelle.',
            }
        ];

        // Variabili globali per la gestione del gioco
        let currentDay = null;
        let score = 3;
        let hintsUsed = 0;

        // Funzione per ottenere il giorno corrente
        function getCurrentDay() {
            const today = new Date();
            // Per testare tutti i giorni, sblocchiamo tutto.
            // PER IL TUO REGALO, COMMENTA LA RIGA SOTTO per abilitare il calendario dell'avvento reale.
            return 25; // Sblocca tutti i giorni per il test
            // return today.getDate(); // Per un uso reale del calendario dell'avvento
        }

        // Funzione per generare la griglia del calendario
        function createCalendar() {
            const calendarGrid = document.getElementById('calendar-grid');
            const today = getCurrentDay();
            calendarData.forEach(dayData => {
                const dayDiv = document.createElement('div');
                const isLocked = dayData.day > today;
                const cardClass = isLocked ? 'locked' : 'unlocked';
                
                dayDiv.className = `card relative flex flex-col justify-center items-center p-6 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 ${cardClass}`;
                dayDiv.style.minHeight = '150px';

                dayDiv.innerHTML = `
                    <p class="absolute top-2 left-2 text-sm font-bold text-gray-400">Giorno ${dayData.day}</p>
                    <img src="${isLocked ? 'https://placehold.co/100x100/30363d/c9d1d9?text=Lock' : dayData.image}" alt="Giorno ${dayData.day}" class="w-24 h-24 object-contain mb-2 ${isLocked ? 'p-4' : ''}">
                    <p class="text-lg font-bold text-center">${dayData.constellation}</p>
                `;

                if (!isLocked) {
                    dayDiv.onclick = () => openDay(dayData);
                }
                
                calendarGrid.appendChild(dayDiv);
            });
        }

        // Funzione per aprire la modale del giorno selezionato
        function openDay(dayData) {
            currentDay = dayData;
            score = 3;
            hintsUsed = 0;

            // Reset della modale
            document.getElementById('modal-title').textContent = `${dayData.constellation}`;
            document.getElementById('modal-date').textContent = `Giorno ${dayData.day}`;
            document.getElementById('modal-image').src = dayData.image;
            document.getElementById('modal-question').textContent = dayData.question;
            document.getElementById('answer-input').value = '';
            document.getElementById('modal-score').textContent = `Punti attuali: 3`;
            document.getElementById('modal-hint-text').classList.add('hidden');
            document.getElementById('modal-result').classList.add('hidden');
            document.getElementById('additional-info').classList.add('hidden');
            document.getElementById('submit-answer-btn').classList.remove('hidden');
            document.getElementById('get-hint-btn').classList.remove('hidden');

            document.getElementById('modal').classList.remove('hidden');
        }

        // Funzione per chiudere la modale
        function closeModal() {
            document.getElementById('modal').classList.add('hidden');
        }

        // Funzione per controllare la risposta
        function checkAnswer() {
            const userAnswer = document.getElementById('answer-input').value.trim().toLowerCase();
            const correctAnswer = currentDay.answer.trim().toLowerCase();
            const resultMessage = document.getElementById('result-message');
            const additionalInfo = document.getElementById('additional-info');
            const infoText = document.getElementById('info-text');
            
            // Nasconde l'input e i pulsanti
            document.getElementById('submit-answer-btn').classList.add('hidden');
            document.getElementById('get-hint-btn').classList.add('hidden');

            if (userAnswer === correctAnswer) {
                resultMessage.textContent = `Risposta esatta! Hai guadagnato ${score} punti.`;
                resultMessage.className = 'text-xl font-bold text-[#238636] correct-answer';
                infoText.textContent = currentDay.info;
                additionalInfo.classList.remove('hidden');
            } else {
                resultMessage.textContent = 'Risposta errata. Riprova!';
                resultMessage.className = 'text-xl font-bold text-red-500 incorrect-answer';
                document.getElementById('submit-answer-btn').classList.remove('hidden');
                document.getElementById('get-hint-btn').classList.remove('hidden');
            }
            document.getElementById('modal-result').classList.remove('hidden');
        }

        // Funzione per ottenere un indizio
        function getHint() {
            if (hintsUsed < 3) {
                const hintText = document.getElementById('modal-hint-text');
                hintText.textContent = currentDay.hints[hintsUsed];
                hintText.classList.remove('hidden');
                hintsUsed++;
                score = Math.max(0, 3 - hintsUsed);
                document.getElementById('modal-score').textContent = `Punti attuali: ${score}`;
            }
            if (hintsUsed >= 3) {
                document.getElementById('get-hint-btn').disabled = true;
                document.getElementById('get-hint-btn').textContent = 'Indizi esauriti';
                document.getElementById('get-hint-btn').classList.remove('bg-gray-500');
                document.getElementById('get-hint-btn').classList.add('bg-red-800', 'cursor-not-allowed');
            }
        }

        // Inizializza il calendario quando la pagina è caricata
        window.onload = createCalendar;

    </script>
</body>
</html>
